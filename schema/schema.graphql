input DemoInput {
	version: String!
}

type demo @aws_api_key @aws_cognito_user_pools {
	id: String!
	version: String!
}

input ChatIn {
	query: String!
	userId: String!
	chatTopicId: String
}

type ChatOut {
	response: String!
	chatTopicId: String
	userId: String
	chatId: String
}

type ChatTopic {
	entryId: String!
	title: String!
	updateDate: String!
}

type Chat {
	entryId: String!
	message: String!
	type: String!
	userId: String!
	chatTopicId: String!
	updateDate: String!
}

type Mutation {
	addDemo(input: DemoInput!): demo @aws_cognito_user_pools(cognito_groups: ["admin"])
	queryChat(input: ChatIn!): ChatOut @aws_api_key
}

type Query {
	getDemos: [demo!] @aws_api_key @aws_cognito_user_pools(cognito_groups: ["admin"])
	getDemosConsistent: [demo!] @aws_api_key @aws_cognito_user_pools(cognito_groups: ["admin"])
	getChatTopics(userId: String!): [ChatTopic!] @aws_api_key
	getChats(chatTopicId: String!, userId: String!): [Chat!] @aws_api_key
}

type Subscription {
	onChatResponse(id: String!): ChatOut
		@aws_subscribe(mutations: ["queryChat"])
}
